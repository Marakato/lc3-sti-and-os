	.ORIG x600
	BRnzp STARTUP

STARTUP
	ST R0,UPPERR0
	ST R1,UPPERR1
	ST R2,UPPERR2
	ST R3,UPPERR3
	LD R1,ADDR
	LEA R2,INTVEC
	AND R3,R3,#0
	ADD R3,R3,#3

INTVECLOOP
	LDR R0,R2,#0
	STR R0,R1,#0
	ADD R1,R1,#1
	ADD R2,R2,#1
	ADD R3,R3,#-1
	BRp INTVECLOOP
	LD R0,UPPERR0
	LD R1,UPPERR1
	LD R2,UPPERR2
	LD R3,UPPERR3
	RET


UPPERR0	.BLKW 1
UPPERR1 .BLKW 1
UPPERR2 .BLKW 1
UPPERR3 .BLKW 1


ADDR	.FILL x0100
INTVEC	.FILL KERNEL_PANIC
	.FILL USER_RTI_AND_OPENFILE_ERROR
	.FILL USER_RTI_AND_OPENFILE_ERROR











KPSAVER0 .BLKW 1
KPSAVER1 .BLKW 1
KPSAVER7 .BLKW 1
CLOCK	.FILL xFFFE
CLOCKVAR .FILL x7FFF
KERNEL_PANIC
	ST R0,KPSAVER0
	ST R1,KPSAVER1

	AND R0,R0,#0
	ADD R0,R0,#6
	TRAP x0

	LD R1,CLOCKVAR
	STI R1,CLOCK
	RTI




	
URTISAVER0 .BLKW 1

USER_RTI_AND_OPENFILE_ERROR
	ST R0,URTISAVER0
	AND R0,R0,#0
	ADD R0,R0,#6
	TRAP x0
	RTI


PROCTGETC	.FILL x301
PROCTOUT	.FILL x302
PROCTPUTS	.FILL x303


	.END